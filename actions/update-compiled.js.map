{"version":3,"sources":["update.js"],"names":[],"mappings":"AAAA;;AACA,IAAI,YAAY,QAAQ,mBAAR,CAAZ;AACJ,IAAI,WAAW,QAAQ,aAAR,CAAX;AACJ,IAAI,QAAQ,QAAQ,eAAR,CAAR;AACJ,IAAI,WAAW,QAAQ,cAAR,CAAX;AACJ,IAAI,cAAc,QAAQ,SAAR,CAAd;;AAEJ,OAAO,OAAP,GAAiB,UAAU,GAAV,EAAc,GAAd,EAAmB;;AAGhC,QAAI,IAAI,MAAJ,KAAe,KAAf,EAAqB;AACrB,YAAI,KAAK,MAAM,GAAN,EAAW,EAAX,CADY;AAErB,YAAI,OAAO,SAAS,IAAT,CAAc,EAAd,CAAP,CAFiB;AAGrB,YAAI,SAAS,EAAT,CAHiB;AAIrB,YAAI,GAAJ,CAAQ,IAAI,SAAJ,CAAc,EAAd,EAAiB,IAAjB,EAAsB,MAAtB,EAA8B,MAA9B,EAAR,EAJqB;KAAzB,MAKM;AACF,iBAAS,GAAT,EAAc,IAAd,CAAmB,QAAQ;AACvB,gBAAI,KAAK,KAAK,EAAL,CADc;AAEvB,mBAAO,KAAK,EAAL,CAFgB;;AAIvB,qBAAS,MAAT,CAAgB,EAAhB,EAAmB,IAAnB,EAJuB;AAKvB,wBAAY,GAAZ,EAAiB,GAAjB,EALuB;SAAR,CAAnB,CADE;KALN;CAHa","file":"update-compiled.js","sourcesContent":["'use strict';\nvar editpager = require('../view/editPager');\nvar database = require('../database');\nvar query = require('../util/query');\nvar postUtil = require('../util/post');\nvar indexAction = require('./index');\n\nmodule.exports = function (req,res) {\n\n\n    if (req.method === 'GET'){\n        var id = query(req).id;\n        var post = database.list[id];\n        var errors = {};\n        res.end(new editpager(id,post,errors).render());\n    }else {\n        postUtil(req).then(data => {\n            let id = data.id;\n            delete data.id;\n\n            database.update(id,data);\n            indexAction(req, res);\n        });\n    }\n};"]}