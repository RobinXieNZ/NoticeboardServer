{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["var tar = require('../')\nvar path = require('path')\nvar rfile = require('rfile')\nvar rimraf = require('rimraf').sync\nvar mkdir = require('mkdirp').sync\n\nvar read = require('fs').createReadStream\nvar write = require('fs').createWriteStream\nvar assert = require('assert')\n\nbeforeEach(function () {\n  rimraf(__dirname + '/output')\n})\nafterEach(function () {\n  rimraf(__dirname + '/output')\n})\ndescribe('tarball.pipe(unpack(directory, callback))', function () {\n  it('unpacks the tarball into the directory', function (done) {\n    read(__dirname + '/fixtures/packed.tar').pipe(tar.unpack(__dirname + '/output/unpacked', function (err) {\n      if (err) return done(err)\n      assert.equal(rfile('./output/unpacked/bar.txt'), rfile('./fixtures/to-pack/bar.txt'))\n      assert.equal(rfile('./output/unpacked/foo.txt'), rfile('./fixtures/to-pack/foo.txt'))\n      done()\n    }))\n  })\n})\ndescribe('gziptarball.pipe(unpack(directory, callback))', function () {\n  it('unpacks the tarball into the directory', function (done) {\n    read(__dirname + '/fixtures/packed.tar.gz').pipe(tar.unpack(__dirname + '/output/unpacked', function (err) {\n      if (err) return done(err)\n      assert.equal(rfile('./output/unpacked/bar.txt'), rfile('./fixtures/to-pack/bar.txt'))\n      assert.equal(rfile('./output/unpacked/foo.txt'), rfile('./fixtures/to-pack/foo.txt'))\n      done()\n    }))\n  })\n})\ndescribe('file.pipe(unpack(directory, callback))', function () {\n  it('copies the file into the directory', function (done) {\n    read(__dirname + '/fixtures/packed-file.txt').pipe(tar.unpack(__dirname + '/output/unpacked', function (err) {\n      if (err) return done(err)\n      assert.equal(rfile('./output/unpacked/update.js'), rfile('./fixtures/packed-file.txt'))\n      done()\n    }))\n  })\n})\ndescribe('pack(directory).pipe(tarball)', function () {\n  it('packs the directory into the output', function (done) {\n    var called = false\n    mkdir(__dirname + '/output/')\n    tar.pack(__dirname + '/fixtures/to-pack').pipe(write(__dirname + '/output/packed.tar.gz'))\n      .on('error', function (err) {\n        if (called) return\n        called = true\n        done(err)\n      })\n      .on('close', function () {\n        if (called) return\n        called = true\n        read(__dirname + '/output/packed.tar.gz').pipe(tar.unpack(__dirname + '/output/unpacked', function (err) {\n          if (err) return done(err)\n          assert.equal(rfile('./output/unpacked/bar.txt'), rfile('./fixtures/to-pack/bar.txt'))\n          assert.equal(rfile('./output/unpacked/foo.txt'), rfile('./fixtures/to-pack/foo.txt'))\n          done()\n        }))\n      })\n  })\n})"]}